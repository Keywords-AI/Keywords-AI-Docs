---
title: "Logging via API"
<<<<<<< HEAD
description: "Log your LLM requests and responses asynchronously"
---

## Overview

An LLM log is a record of an LLM request. It includes the prompt, the response, and the metadata associated with the request.  

In Keywords AI, you can see every LLM log's metrics like `Messages`, `Model`, `Provider`, `User`, `API key`, `Prompt`, `Response`, `Cost`, `Duration`, `Status`, and `Timestamp`.

<Tabs>

<Tab title="LLM logs">
<Frame>
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/observability/overview/logs.jpg" />
</Frame>
</Tab>

<Tab title="Filters">
<Frame>
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/observability/logs/filters.png" />
</Frame>
</Tab>

<Tab title="Full-text search">
<Frame>
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/observability/logs/full-text-search.png" />
</Frame>
</Tab>

</Tabs>

## Integrate with your existing AI framework

<Info>
    Keywords AI's logging is API only now, so you can use any AI framework or SDK of your choice (OpenAI, Anthropic, etc.) and simply call our logging API after receiving responses from your LLM provider.
</Info>

## How to use Keywords AI logging API
=======
description: "Send your LLM logs to Keywords AI and monitor them in real-time"
---

## What is logging?

1. Send a `POST` request to log your AI conversations
2. See them appear instantly on your Keywords AI platform

<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/observability/overview/logs.jpg" />
</Frame>



## Use logging API
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
### 1. Get your Keywords AI API key

After you create an account on [Keywords AI](https://platform.keywordsai.co), you can get your API key from the [API keys page](https://platform.keywordsai.co/platform/api/api-keys).

<<<<<<< HEAD
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/get-started/api-keys.png" alt="Create API key placeholder" />
=======
<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/get-started/api-keys.png" alt="Create API key placeholder" />
</Frame>
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9

### 2. Integrate Async Logging into your codebase

<CodeGroup>
<<<<<<< HEAD
```python Python {3, 26}
=======
```python Python {22}
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
import requests

url = "https://api.keywordsai.co/api/request-logs/create/"
payload = {
<<<<<<< HEAD
    "model": "claude-3-5-sonnet-20240620",
    "prompt_messages": [
        {
            "role": "user",
            "content": "Hi"
        },
    ],
    "completion_message": {
        "role": "assistant",
        "content": "Hi, how can I assist you today?"
    },
    "cost": 0.00042,
    "generation_time": 5.7,
    "ttft": 3.1,
    "customer_params": {
        "customer_identifier": "customer_123",
        "name": "Hendrix Liu",
        "email": "hendrix@keywordsai.co" 
    }
}
=======
    "model": "gpt-4o",
    "prompt_messages": [
        {
            "role": "user",
            "content": "How can I help a customer with a billing issue?"
        }
    ],
    "completion_message": {
        "role": "assistant",
        "content": "I'd be happy to help with billing issues. First, let me check your account details..."
    },
    "customer_params": {
        "customer_identifier": "support_agent_001"
    }
}

>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
headers = {
    "Authorization": "Bearer YOUR_KEYWORDS_AI_API_KEY",
    "Content-Type": "application/json"
}

<<<<<<< HEAD
response = requests.request("POST", url, headers=headers, json=payload)
```
```typescript TypeScript {1, 3}
=======
response = requests.post(url, headers=headers, json=payload)
```

```typescript TypeScript {3}
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
const url = 'https://api.keywordsai.co/api/request-logs/create/';
const headers = {
    'Authorization': 'Bearer YOUR_KEYWORDS_AI_API_KEY',
    'Content-Type': 'application/json'
};

const payload = {
<<<<<<< HEAD
    model: 'claude-3-5-sonnet-20240620',
    prompt_messages: [
        {
            role: "user",
            content: "Hi"
        },
    ],
    completion_message: {
        role: "assistant",
        content: "Hi, how can I assist you today?"
    },
    customer_params: {
        customer_identifier: "customer_123",
        name: "Hendrix Liu", 
        email: "hendrix@keywordsai.co" 
    },
    cost: 0.00042,
    generation_time: 5.7,
    ttft: 3.1,
=======
    model: 'gpt-4o',
    prompt_messages: [
        {
            role: "user",
            content: "How can I help a customer with a billing issue?"
        }
    ],
    completion_message: {
        role: "assistant",
        content: "I'd be happy to help with billing issues. First, let me check your account details..."
    },
    customer_params: {
        customer_identifier: "support_agent_001"
    }
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
};

fetch(url, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(payload)
})
.then(response => response.json())
.then(data => {
    console.log(data);
<<<<<<< HEAD
})
```

```bash cURL {1, 3}
curl -X POST "https://api.keywordsai.co/api/request-logs/create/" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer {YOUR_KEYWORDS_AI_API_KEY}" \
-d '{
    "model": "claude-3-5-sonnet-20240620",
    "prompt_messages": [
        {
          "role": "user",
          "content": "Hi"
=======
});
```

```bash cURL {3}
curl -X POST "https://api.keywordsai.co/api/request-logs/create/" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer YOUR_KEYWORDS_AI_API_KEY" \
-d '{
    "model": "gpt-4o",
    "prompt_messages": [
        {
            "role": "user",
            "content": "How can I help a customer with a billing issue?"
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
        }
    ],
    "completion_message": {
        "role": "assistant",
<<<<<<< HEAD
        "content": "Hi, how can I assist you today?"
    },
    "cost": 0.00042,
    "generation_time": 5.7,
    "ttft": 3.1,
    "customer_params": {
        "customer_identifier": "customer_123",
        "name": "Hendrix Liu", 
        "email": "hendrix@keywordsai.co" 
=======
        "content": "I'd be happy to help with billing issues. First, let me check your account details..."
    },
    "customer_params": {
        "customer_identifier": "support_agent_001"
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
    }
}'
```
</CodeGroup>


### 3. Check your logs on the platform
After you integrate the async logging into your codebase and send the request successfully, you can check your logs on the [Logs page](https://platform.keywordsai.co/platform/requests).
<<<<<<< HEAD

<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/get-started/logs_async.png" alt="Logs page placeholder" />


### 4. Parameters
Check out the [Logging endpoint page](/api-endpoints/integration/request-logging-endpoint) to see all supported parameters.

Parameters like: `cost`, `completion_tokens`, and `prompt_tokens` will be automatically calculated if your model is supported. Check out our [models page](https://platform.keywordsai.co/platform/models?sort_by=model_name) to see the list of supported models.

## Example with OpenAI SDK
The following example demonstrates how to integrate the Keywords AI Logging API with the OpenAI SDK.

### 1. Basic OpenAI Implementation
This is a typical OpenAI SDK implementation:
```typescript OpenAI NodeJS
import OpenAI from "openai";

const openai = new OpenAI();

async function main() {
  const completion = await openai.chat.completions.create({
   messages: [
      { 
        role: "assistant", 
        content: "You are a helpful assistant." 
      },
      {
        role: "user",
        content: "Hello!",
      }
    ],
    model: "gpt-4o",
  });

  console.log(completion.choices[0]);
}

main();
```
### 2. Add Implementation with Logging
Here's the same implementation with Keywords AI logging added:

```typescript OpenAI NodeJS
import OpenAI from "openai";

const openai = new OpenAI();

async function main() {
  const startTime = Date.now();
  
  const completion = await openai.chat.completions.create({
    messages: [
      { 
        role: "assistant", 
        content: "You are a helpful assistant." 
      },
      {
        role: "user",
        content: "Hello!",
      }
    ],
    model: "gpt-4o"
  });

  const endTime = Date.now();
  const generationTime = (endTime - startTime) / 1000; // Convert to seconds

  // Log to Keywords AI
  await fetch('https://api.keywordsai.co/api/request-logs/create/', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_KEYWORDS_AI_API_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      model: "gpt-4o",
      prompt_messages: [
        { 
          role: "assistant", 
          content: "You are a helpful assistant." 
        },
        {
          role: "user",
          content: "Hello!",
        }
      ],
      completion_message: completion.choices[0].message,
      generation_time: generationTime
      // other Keywords AI parameters
    })
  });

  console.log(completion.choices[0]);
}

main();
```
=======
<Frame className="rounded-md">
<img src="https://keywordsai-static.s3.us-east-1.amazonaws.com/docs/documentation/get-started/logging_showlog.png" alt="Logs page placeholder" />
</Frame>
>>>>>>> c18be3fd69f0afc5a6a00456505a5f72fc19f0e9
