---
title: "Create credit transaction"
api: "POST /api/payment/credit-transactions/"
description: "Creates a new credit transaction (admin-only)"
---

Creates a new credit transaction for an organization. This endpoint is restricted to administrators only.

<Warning>
**Credit transactions are append-only and immutable:**
- ‚úÖ CREATE - New transactions can be created
- ‚ùå NO UPDATES - Existing transactions cannot be modified
- ‚ùå NO DELETES - Transactions are permanent
- üìù CORRECTIONS - To fix errors, create a new transaction with opposite amount
</Warning>

<Note>
Credits only apply to the Chat Completions endpoint (`/api/chat/completions`). All other endpoints (Anthropic, Gemini, Embeddings, etc.) require customer-provided API credentials regardless of credit balance.
</Note>

## Request body

### Required fields

<ParamField body="organization_subscription" type="integer" required>
  Subscription ID for the organization
</ParamField>

<ParamField body="amount" type="float" required>
  Transaction amount in USD (positive or negative)
  - Positive values add credits (purchase, grant, bonus)
  - Negative values remove credits (adjustment, refund)
  
  <Accordion title="Example">
  ```json
  "amount": 100.0
  ```
  </Accordion>
</ParamField>

<ParamField body="transaction_type" type="string" required>
  Type of transaction
  
  <Accordion title="Supported types">
  - `purchase` - Customer purchased credits
  - `grant` - Admin granted free credits
  - `adjustment` - Admin adjustment (positive or negative)
  - `refund` - Refund issued
  - `bonus` - Promotional or bonus credits
  </Accordion>
</ParamField>

### Optional fields

<ParamField body="description" type="string">
  Human-readable description of the transaction
  
  <Accordion title="Example">
  ```json
  "description": "Welcome bonus for new customer"
  ```
  </Accordion>
</ParamField>

<ParamField body="expires_at" type="datetime">
  Expiration date for time-limited credits (ISO 8601 format)
  
  <Accordion title="Example">
  ```json
  "expires_at": "2026-01-01T00:00:00Z"
  ```
  </Accordion>
</ParamField>

<ParamField body="stripe_payment_intent_id" type="string">
  Stripe payment intent ID for payment tracking
</ParamField>

<ParamField body="metadata" type="object">
  Additional JSON metadata for compliance and tracking
  
  <Accordion title="Example">
  ```json
  {
    "metadata": {
      "contract_id": "ENT-2025-001",
      "sales_rep": "john@company.com",
      "approved_by": "jane@company.com"
    }
  }
  ```
  </Accordion>
</ParamField>

## Response fields

<ResponseField name="id" type="string">
  Unique transaction identifier
</ResponseField>

<ResponseField name="organization_subscription" type="integer">
  Subscription ID
</ResponseField>

<ResponseField name="unique_organization_id" type="string">
  Organization's unique identifier
</ResponseField>

<ResponseField name="amount" type="float">
  Transaction amount in USD
</ResponseField>

<ResponseField name="transaction_type" type="string">
  Type of transaction
</ResponseField>

<ResponseField name="created_at" type="datetime">
  When transaction was created (auto-generated)
</ResponseField>

<ResponseField name="expires_at" type="datetime">
  Expiration date (nullable)
</ResponseField>

<ResponseField name="description" type="string">
  Description of the transaction
</ResponseField>

<ResponseField name="stripe_payment_intent_id" type="string">
  Stripe payment intent ID
</ResponseField>

<ResponseField name="metadata" type="object">
  Additional JSON metadata
</ResponseField>

## Response

<ResponseExample>
```json 201 Created
{
  "id": "ct_1a2b3c4d5e6f7g8h",
  "organization_subscription": 42,
  "unique_organization_id": "8264a3f4-40c7-476a-97d1-96908127ea21",
  "amount": 100.0,
  "transaction_type": "grant",
  "created_at": "2025-12-27T10:30:00.000Z",
  "expires_at": null,
  "description": "Welcome bonus for new customer",
  "stripe_payment_intent_id": "",
  "metadata": {}
}
```

```json 400 Bad Request
{
  "organization_subscription": ["This field is required."]
}
```

```json 401 Unauthorized
{
  "detail": "Your API key is invalid or expired"
}
```

```json 403 Forbidden
{
  "detail": "Only administrators can create credit transactions."
}
```
</ResponseExample>

<RequestExample>
```python Python (Grant Credits)
import requests

url = "https://api.keywordsai.co/api/payment/credit-transactions/"
headers = {
    "Authorization": "Bearer YOUR_ADMIN_TOKEN",
    "Content-Type": "application/json"
}
payload = {
    "organization_subscription": 42,
    "amount": 100.0,
    "transaction_type": "grant",
    "description": "Welcome bonus for new customer"
}

response = requests.post(url, headers=headers, json=payload)
print(response.json())
```

```python Python (Adjustment - Deduct)
import requests

url = "https://api.keywordsai.co/api/payment/credit-transactions/"
headers = {
    "Authorization": "Bearer YOUR_ADMIN_TOKEN",
    "Content-Type": "application/json"
}
payload = {
    "organization_subscription": 42,
    "amount": -50.0,
    "transaction_type": "adjustment",
    "description": "Correcting previous grant error"
}

response = requests.post(url, headers=headers, json=payload)
print(response.json())
```

```typescript TypeScript
const url = 'https://api.keywordsai.co/api/payment/credit-transactions/';
const headers = {
    'Authorization': 'Bearer YOUR_ADMIN_TOKEN',
    'Content-Type': 'application/json'
};

const payload = {
    organization_subscription: 42,
    amount: 100.0,
    transaction_type: 'grant',
    description: 'Welcome bonus for new customer'
};

const response = await fetch(url, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(payload)
});
const data = await response.json();
console.log(data);
```

```bash cURL
curl -X POST "https://api.keywordsai.co/api/payment/credit-transactions/" \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "organization_subscription": 42,
    "amount": 100.0,
    "transaction_type": "grant",
    "description": "Welcome bonus for new customer"
  }'
```
</RequestExample>
